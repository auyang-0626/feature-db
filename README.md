# feature-db


事件类型 1---N 指标 1--n 分片

写事务日志，更新内存值， 批量刷磁盘

直接IO  && io-ring?


基本架构

meta-->支持用户对元数据修改（新增事件类型，增加指标等）

kv--> 从meta查询元数据信息，保存在自己的内存中

采用hash索引(事件类型+事件ID，64位hash值)
一致性hash，面向扩展
相同key的指标存放在一起，局部性原则


元信息有专门的mate_server,每个node在内存中放一份

实时与离线相结合

存储：先写日志，然后更新内存，最后异步刷盘
归档：事件数据，本地+oss